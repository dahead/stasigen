<link rel="stylesheet" type="text/css" href="../css/main.css">



<h1 id="endless">endless</h1>


<p>endlessh ist ein Linux SSH Server der als Honeypot dient.</p>


<p>Dabei gibt endlessh sehr, sehr langsam Anfragen an den Client zurueck.</p>



<p>Das Repository auf <a href="https://github.com/skeeto/endlessh">Github</a></p>



<h3 id="installation">Installation</h3>



<p>Die Installation von <em>endlessh</em> erfolgt unter Debian via <code>apt-get install</code>.</p>



<p><code>sudo apt-get install endlessh -y</code></p>



<p>Wird Debian Buster eingesetzt, muss die <code>/etc/apt/sources.list</code> um die Backports ergaenzt werden, ansonsten findet apt das Paket nicht. Bei Bullseye und neuer wird <em>endlessh</em> direkt ueber die Standard Paketquellen installiert.</p>



<h3 id="config">config</h3>



<p>Nun legen wir die config an:</p>



<p><code>sudo nano /etc/endlessh/config</code></p>



<p>Hier fuegen wir folgendes ein:</p>



<pre><code></code></pre>


<pre><code># The port on which to listen for new SSH connections.

<p></code></pre></p>


<pre><code>Port 22

<p></code></pre></p>



<pre><code># The endless banner is sent one line at a time. This is the delay

<p></code></pre></p>


<pre><code># in milliseconds between individual lines.

<p></code></pre></p>


<pre><code>Delay 10000

<p></code></pre></p>



<pre><code># The length of each line is randomized. This controls the maximum

<p></code></pre></p>


<pre><code># length of each line. Shorter lines may keep clients on for longer if

<p></code></pre></p>


<pre><code># they give up after a certain number of bytes.

<p></code></pre></p>


<pre><code>MaxLineLength 32

<p></code></pre></p>



<pre><code># Maximum number of connections to accept at a time. Connections beyond

<p></code></pre></p>


<pre><code># this are not immediately rejected, but will wait in the queue.

<p></code></pre></p>


<pre><code>MaxClients 4096

<p></code></pre></p>



<pre><code># Set the detail level for the log.

<p></code></pre></p>


<pre><code>#   0 = Quiet

<p></code></pre></p>


<pre><code>#   1 = Standard, useful log messages

<p></code></pre></p>


<pre><code>#   2 = Very noisy debugging information

<p></code></pre></p>


<pre><code>LogLevel 0

<p></code></pre></p>



<pre><code># Set the family of the listening socket

<p></code></pre></p>


<pre><code>#   0 = Use IPv4 Mapped IPv6 (Both v4 and v6, default)

<p></code></pre></p>


<pre><code>#   4 = Use IPv4 only

<p></code></pre></p>


<pre><code>#   6 = Use IPv6 only

<p></code></pre></p>


<pre><code>BindFamily 0

<p></code></pre></p>


<pre><code></code></pre>



<h3 id="dienst-anpassen">Dienst anpassen</h3>



<p>Bevor jetzt der Dienst gestartet werden kann, muss noch die systemd Dienstkonfiguration bearbeitet werden:</p>



<p><code>sudo nano /etc/systemd/system/endlessh.service</code></p>



<p>Siehe auch die Diskussion unter <a href="https://github.com/skeeto/endlessh/issues/39">Github</a>.</p>



<pre><code></code></pre>


<pre><code>## If you want Endlessh to bind on ports &lt; 1024

<p></code></pre></p>


<pre><code>## 1) run:

<p></code></pre></p>


<pre><code>##     setcap 'cap_net_bind_service=+ep' /usr/local/bin/endlessh

<p></code></pre></p>


<pre><code>## 2) uncomment following line

<p></code></pre></p>


<pre><code>AmbientCapabilities=CAP_NET_BIND_SERVICE

<p></code></pre></p>


<pre><code>## 3) comment following line

<p></code></pre></p>


<pre><code>#PrivateUsers=true

<p></code></pre></p>


<pre><code></code></pre>



<h3 id="start">Start</h3>



<p>Nun starten wir endlessh:</p>



<p><code>sudo systemctl start endlessh</code></p>



<p>Anschliessend koennen wir via <code>netstat -tulpn</code> pruefen, ob sshd auf Port 2222 und endlessh auf Port 22 laeuft:</p>



<p><img src="../img/endlessh_syslog_netstat_tulpn.jpg" alt="" /></p>



<footer>(c) 2000 - 2021 by dahead</footer>



